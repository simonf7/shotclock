<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Shot Clock</title>

    <link rel="stylesheet" type="text/css" href="shotclock.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#000000" />
    <meta name="theme-color" content="#ffffff" />

    <!--[if IE]>
      <script
        type="text/javascript"
        src="vendor/SegmentDisplay/excanvas.js"
      ></script>
    <![endif]-->

    <script
      type="text/javascript"
      src="vendor/SegmentDisplay/segment-display.js"
    ></script>
    <script type="text/javascript" src="shotclock.js"></script>
  </head>

  <body>
    <audio id="buzzer">
      <source src="assets/buzzer.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <canvas id="shotclock"></canvas>

    <div id="buttons">
      <button id="start" class="control">Start/Stop [space]</button>
      <button id="reset" class="control">Reset [r]</button>
      -
      <button id="down" class="control square">-</button>
      <button id="up" class="control square">+</button>
    </div>

    <script type="text/javascript">
      var shotclock = new ShotClock('shotclock');

      // see if the number of seconds has been supplied after the # in the url
      var hash = parseInt(location.hash.replace('#', ''));
      if (
        typeof hash === 'number' &&
        hash % 1 === 0 &&
        hash > 0 &&
        hash < 100
      ) {
        shotclock.timerSeconds = hash;
      } else {
        // else default 25 seconds
        shotclock.timerSeconds = 25;
      }
      shotclock.audio_id = 'buzzer';
      shotclock.autoscale = true;
      shotclock.setup();

      // start/stop to the canvas itself
      $('#shotclock').click(shotclock.startStop);

      // attach events to the buttons
      $('#start').click(shotclock.startStop);

      // reset
      $('#reset').click(shotclock.reset);

      // decrease time
      $('#down').click(shotclock.decrease);

      // increase time
      $('#up').click(shotclock.increase);

      // key presses
      $(document).keypress(function() {
        if (event.which == 32) {
          shotclock.startStop();
        }
        if (event.which == 82 || event.which == 114) {
          shotclock.reset();
        }
        if (event.which == 43 || event.which == 61) {
          shotclock.increase();
        }
        if (event.which == 45) {
          shotclock.decrease();
        }
      });

      // prevent buttons keeping focus
      $('.control').mouseup(function() {
        this.blur();
      });
    </script>
  </body>
</html>
